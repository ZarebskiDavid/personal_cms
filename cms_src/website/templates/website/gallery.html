{% extends 'website/base.html' %}

{% block title %}Home--{{settings.title}}{% endblock %}

{% block content %}
{% load common %}
{% load static %}


<div class="columns">
	{% for c in 0|range:settings.gallery_width %}
		<div class="column col-sm-12">
			{%with begin=c|multiply:settings.gallery_width|stringformat:"s" end=c|multiply:settings.gallery_width|add:settings.gallery_width|stringformat:"s"%}
				{% with photo_slice=begin|add:":"|add:end %}
					{% for p in photos|slice:photo_slice %}
						<div class="card">
							<div class="card-header">
								<div class="card-title h5">
									{{p.title}}
									<div class="float-right">
										{%if p.description is not None or p.buy_link is not None%}
											<div class="popover popover-left">
												<button class="btn"><i class="icon icon-plus"></i></button>
												<div class="popover-container">
													<div class="card">
														{{p.description|default_if_none:""}}
														{% if p.buy_link is not None %}
															<a href="{{p.buy_link}}">
																<button class="btn btn-link">
																	buy
																</button>	
															</a>
														{%endif%}
													</div>
												</div>
											</div>
										{%endif%}
									</div>
								</div>
							</div>
							<div class="card-image">
								<img src="{{ MEDIA_URL }}/{{p.photo}}" class="img-responsive">
							</div>
							<div class="card-body">
								<img src="{% static 'website/img/eye.png' %}" height="16">{{p.nb_views}}
								{%if p.author is not None%}
									<img src="{% static 'website/img/photo.png' %}" height="16">{{p.author}}
								{%endif%}
								{% for per in p.photo_models.all %}
									<img src="{% static 'website/img/person.png' %}" height="16">{{per}}
								{% endfor %}
								{%if p.place_name is not None%}
									<img src="{% static 'website/img/place.png' %}" height="16">{{p.place_name}}
								{%endif%}
  							</div>
  							<div class="card-footer">
  								{% for t in p.tags %}
									<span class="chip">{{t}}</span>
								{% endfor %}
  							</div>

						</div>
						<br>
						
					{% endfor %}
				{%endwith%}
			{%endwith%}
		</div>
	{% endfor %}
</div>


{% endblock %}